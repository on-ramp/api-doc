
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ON/RAMP payment API v1.0</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <span class="toc-link">API v1.0</span>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#on-ramp-merchant-integration" class="toc-h1 toc-link" data-title="ON/RAMP merchant integration.">ON/RAMP merchant integration.</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#terminology-and-acronyms" class="toc-h2 toc-link" data-title="Terminology and Acronyms">Terminology and Acronyms</a>
                  </li>
                  <li>
                    <a href="#base-url" class="toc-h2 toc-link" data-title="Base URL">Base URL</a>
                  </li>
                  <li>
                    <a href="#api-flow" class="toc-h2 toc-link" data-title="API flow">API flow</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#calling-on-ramp-api-endpoints" class="toc-h1 toc-link" data-title="Calling ON/RAMP API endpoints.">Calling <strong>ON/RAMP</strong> API endpoints.</a>
          </li>
          <li>
            <a href="#invoice-expiration" class="toc-h1 toc-link" data-title="Invoice expiration">Invoice expiration</a>
          </li>
          <li>
            <a href="#ingress-api" class="toc-h1 toc-link" data-title="Ingress API">Ingress API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-ingress-invoice" class="toc-h2 toc-link" data-title="Create Ingress Invoice">Create Ingress Invoice</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#egress-api" class="toc-h1 toc-link" data-title="Egress API">Egress API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-egress-invoice-app-redirection-flow" class="toc-h2 toc-link" data-title="Create Egress Invoice (App redirection flow)">Create Egress Invoice (App redirection flow)</a>
                  </li>
                  <li>
                    <a href="#create-egress-invoice-user-email-flow" class="toc-h2 toc-link" data-title="Create Egress Invoice (User email flow)">Create Egress Invoice (User email flow)</a>
                  </li>
                  <li>
                    <a href="#approve-or-reject-user-email-egress-invoice-user-email-flow" class="toc-h2 toc-link" data-title="Approve or Reject User Email Egress Invoice (User email flow)">Approve or Reject User Email Egress Invoice (User email flow)</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='on-ramp-merchant-integration'>ON/RAMP merchant integration.</h1><h2 id='terminology-and-acronyms'>Terminology and Acronyms</h2>
<ul>
<li>Merchant: The service using <strong>ON/RAMP</strong> as payment processor.</li>
<li>User: The physical person who sends or receives funds to/from the merchant through <strong>ON/RAMP</strong>.</li>
</ul>
<h2 id='base-url'>Base URL</h2>
<p>Production:
<strong><a href="https://api.onramp.ltd">https://api.onramp.ltd</a></strong></p>

<p>Test:
<strong><a href="https://stage-api.onramp.ltd">https://stage-api.onramp.ltd</a></strong></p>
<h2 id='api-flow'>API flow</h2><h3 id='ingress-flow'>Ingress flow</h3>
<ol>
<li>Merchant <a href="#create-ingress-invoice">creates an ingress invoice url</a>.</li>
<li>Merchant redirects user to the ingress invoice url.</li>
<li><strong>ON/RAMP</strong> handles the payment.</li>
<li>If the payment succeed, <strong>ON/RAMP</strong> will <a href="#callback-ingress-invoice">call back the merchant to either confirm the ingress transaction or to abort it</a>. If
merchants confirms, the ingress payment will be considered fulfilled, otherwise, it will be considered as failed.</li>
<li><strong>ON/RAMP</strong> redirects the user back to merchant.</li>
</ol>
<h3 id='egress-flow'>Egress flow</h3>
<p>There are currently two different supported flows for egress:</p>
<h4 id='app-redirection-flow'>App redirection flow</h4>
<ol>
<li>Merchant <a href="#create-egress-invoice-app-redirection-flow">creates an egress invoice url</a>.</li>
<li>Merchant redirects user to the egress invoice url.</li>
<li><strong>ON/RAMP</strong> handles the payment.</li>
<li>If the payment succeed, <strong>ON/RAMP</strong> will <a href="#callback-egress-invoice">call back the merchant to either confirm the egress transaction or to abort it</a>. If merchants confirms, the egress payment will be considered fulfilled, otherwise, it will be considered as failed.</li>
<li>User will see in <strong>ON/RAMP</strong> client the outcome of the process.</li>
</ol>
<h4 id='user-email-flow'>User email flow</h4>
<ol>
<li>Prerequisite: User will need to have an account in <strong>ON/RAMP</strong> with KYC verified.</li>
<li>Merchant <a href="#create-egress-invoice-user-email-flow">creates a user email egress invoice</a>.</li>
<li><strong>ON/RAMP</strong> prepares the payment and returns a reference of it for the merchant to later approve it or reject it.</li>
<li>Before the <a href="#invoice-expiration">invoice expires</a>, whenever merchants want to, they can <a href="#approve-or-reject-user-email-egress-invoice-user-email-flow">approve or reject the process</a>. At that moment, <strong>ON/RAMP</strong> will finish the process, move the funds to users balance if needed and return a success or failure.</li>
<li>User will see in <strong>ON/RAMP</strong> client the outcome of the process.</li>
</ol>
<h1 id='calling-on-ramp-api-endpoints'>Calling <strong>ON/RAMP</strong> API endpoints.</h1>
<p><strong>ON/RAMP</strong> offers a simple REST API taking JSON values as request payload, and returning JSON values as response.
Each call shall include the headers:</p>

<ul>
<li><p><code>Content-Type: application/json</code></p></li>
<li><p><code>x-xco-authorization: Bearer AUTH_TOKEN</code></p></li>
</ul>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/create_ingress_invoice <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer </span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span>         <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                  <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 1234                                     
              , "fiat_currency"      : "EUR"                                    
              , "payment_ack_url"    : "wwww.example.com"                       
              , "user_redirect_url"  : "www.example.com?user_redirected"        
              , "timeout_in_sec"     : 3600                                     
              , "offer_skin"         : {}                                       
              }'</span>
</code></pre>
<p>Where <code>AUTH_TOKEN</code> is replaced with merchant&#39;s API key.</p>
<h1 id='invoice-expiration'>Invoice expiration</h1>
<p>Each invoice expires after the given timeout or after it has been paid once. This means the user can not accidentally paid
twice for the same ingress invoice, nor get paid twice from the same egress invoice; but it also means the merchant should
create a new invoice to the user every time the user request a new payment. If an user clicks on an expired invoice, it will
get redirected back to the merchant.</p>
<h1 id='ingress-api'>Ingress API</h1><h2 id='create-ingress-invoice'>Create Ingress Invoice</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/create_ingress_invoice                                    <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>                   <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                                     <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 3000
              , "fiat_currency"      : "EUR"
              , "payment_ack_url"    : "wwww.example.com"
              , "user_redirect_url"  : "www.example.com?user_redirected"
              , "timeout_in_sec"     : 3600
              , "offer_skin"         :
                  { "title" : "The Nice merchant"
                  , "image" : "https:static.example.com/merchant-logo"
                  , "description": "Awesome green Pluff with handler"
                  }
              , "billing_details"    :
                  { "payer_email"            : "mrpayer.payerson@email.com"
                  , "payer_first_name"       : "MrPayer"
                  , "payer_last_name"        : "Payerson"
                  , "payer_phone"            : "0034666444446"
                  , "birth_date"             : "24:11:1980"
                  , "street"                 : "Main Street"
                  , "unit"                   : "Floor 7 12B"
                  , "postal_code"            : "0000001"
                  , "city"                   : "Big Town"
                  , "county"                 : "Big Town county"
                  , "state"                  : "CA"
                  , "prefecture"             : "Prefecture-ku"
                  , "country"                : "GBR"
                  , "kyc_verified"           : "1999-11-24 09:14:49.087362+00"
                  , "kyc_document"           : "Passport"
                  , "kyc_reference"          : "25177aa2-d848-846d-226c-97ec3096f5fe"
                  , "address_verified"       : "1999-11-24 09:14:49.087362+00"
                  , "address_doc_reference"  : "3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"
                  , "player_level"           : "New"
                  , "member_since"           : "14:07:2019"
                  , "merchant_customer_id"   : "u2340112"
                  }
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"fiat_amount"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"fiat_currency"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"payment_ack_url"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"wwww.example.com"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_redirect_url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com?user_redirected"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"timeout_in_sec"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"offer_skin"</span><span class="w">         </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"title"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Nice merchant"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"image"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:static.example.com/merchant-logo"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome green Pluff with handler"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"billing_details"</span><span class="w">    </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"payer_email"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"mrpayer.payerson@email.com"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_first_name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"MrPayer"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_last_name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payerson"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_phone"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0034666444446"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"birth_date"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"24:11:1980"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"street"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Street"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Floor 7 12B"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"postal_code"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0000001"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"city"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"county"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town county"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"prefecture"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"Prefecture-ku"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_verified"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-11-24 09:14:49.087362+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_document"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Passport"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_reference"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"25177aa2-d848-846d-226c-97ec3096f5fe"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_verified"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-11-24 09:14:49.087362+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_doc_reference"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"player_level"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"member_since"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"14:07:2019"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"merchant_customer_id"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"u2340112"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"invoice_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62b570e8-9723-4287-a5a8-e825c2ffced2"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"invoice_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://wallet.onramp.ltd/ingressing?reference=a3076265-138d-4be6-89fb-d50427adaf4e"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/create_ingress_invoice </code></b></aside>
<h3 id='request-json-fields'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>fiat_amount</td>
<td>Integer</td>
<td>Eur amount to be paid denominated in cents .</td>
</tr>
<tr>
<td>fiat_currency</td>
<td>String</td>
<td>The constant <code>&quot;EUR&quot;</code>.</td>
</tr>
<tr>
<td>payment_ack_url</td>
<td>String</td>
<td>Merchant callback endpoint to confirm ingress transaction. It should be a complete, well formed, url.</td>
</tr>
<tr>
<td>user_redirect_url</td>
<td>String</td>
<td>Where to redirect the user after a successful payment. It should be a complete, well formed, url.</td>
</tr>
<tr>
<td>timeout_in_sec</td>
<td>Integer</td>
<td>When to expire the link if unused.</td>
</tr>
<tr>
<td>offer_skin</td>
<td>Ingress Skin</td>
<td>Specify how the offer should be displayed to the user.</td>
</tr>
<tr>
<td>billing_details</td>
<td>Billing Details</td>
<td>User billing details. (Optional)</td>
</tr>
</tbody></table>
<h3 id='ingress-skin'>Ingress Skin</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>String</td>
<td>Short string containing merchant&#39;s or product&#39;s name.</td>
</tr>
<tr>
<td>image</td>
<td>Url</td>
<td>image to stylized the offer.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>A text explaining what the user is purchasing.</td>
</tr>
</tbody></table>
<h3 id='billing-details'>Billing Details</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>payer_email</td>
<td>Email</td>
<td>Email of the user making the payment.</td>
</tr>
<tr>
<td>payer_first_name</td>
<td>String</td>
<td>First name of the user making the payment.</td>
</tr>
<tr>
<td>payer_last_name</td>
<td>String</td>
<td>Last name of the user making the payment.</td>
</tr>
<tr>
<td>payer_phone</td>
<td>String</td>
<td>Including country code, without spaces or separators.</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date</td>
<td>Date of birth of the user making the payment.</td>
</tr>
<tr>
<td>street</td>
<td>String</td>
<td>Street from the billing address.</td>
</tr>
<tr>
<td>unit</td>
<td>String</td>
<td>Unit from the billing address.</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>Postal code from the billing address.</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>City from the billing address.</td>
</tr>
<tr>
<td>county</td>
<td>String</td>
<td>County from the billing address.</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>State from the billing address.</td>
</tr>
<tr>
<td>prefecture</td>
<td>String</td>
<td>Prefecture from the billing address.</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>Country from the billing address. Should be a 3 letter ISO Code.</td>
</tr>
<tr>
<td>kyc_verified</td>
<td>Date</td>
<td>Date when the user was KYC verified.</td>
</tr>
<tr>
<td>kyc_document</td>
<td>String</td>
<td>Type of the document. Some examples would be Passport or National_ID.</td>
</tr>
<tr>
<td>kyc_reference</td>
<td>String</td>
<td>A unique id of the KYC verification. Something like a UUID.</td>
</tr>
<tr>
<td>address_verified</td>
<td>Date</td>
<td>Date when the address was verified.</td>
</tr>
<tr>
<td>address_doc_reference</td>
<td>String</td>
<td>A unique id of the address document reference.</td>
</tr>
<tr>
<td>player_level</td>
<td>String</td>
<td>Your internal player level. Something like New, Normal or VIP would be examples of it.</td>
</tr>
<tr>
<td>member_since</td>
<td>Date</td>
<td>The date since that user is a member of yours.</td>
</tr>
<tr>
<td>merchant_customer_id</td>
<td>String</td>
<td>The merchant customer id.</td>
</tr>
</tbody></table>
<h3 id='callback-ingress-invoice'>Callback Ingress Invoice</h3>
<p>Once <strong>ON/RAMP</strong> is ready to commit the payment, it will call back merchant to confirm. <strong>It is only at this point
when the user transaction should be consider done and credited at merchant&#39;s side</strong>. If the merchant was able to
credit the user, then it should answer the callback with an http 200 status code; if the merchant was unable to
credit the user, it should answer with an http 204 status code (this will cancel the user payment, expiring his
invoice link). <strong>Any other status code</strong> but 200 or 204 <strong>will be treated as an internal error from the merchant side</strong>,
pausing the user payment and prompting manual intervention, potentially delaying the process several hours.</p>
<h3 id='response-json-fields'>Response JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoice_id</td>
<td>String</td>
<td>Internal <strong>ON/RAMP</strong>&#39;s Invoice Identifier.</td>
</tr>
<tr>
<td>invoice_url</td>
<td>String</td>
<td>Url where to redirect user.</td>
</tr>
</tbody></table>
<h1 id='egress-api'>Egress API</h1><h2 id='create-egress-invoice-app-redirection-flow'>Create Egress Invoice (App redirection flow)</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/create_egress_invoice                     <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>   <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                     <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 3000
              , "fiat_currency"      : "EUR"
              , "payment_ack_url"    : "wwww.example.com"
              , "user_redirect_url"  : "www.example.com?user_redirected"
              , "timeout_in_sec"     : 3600
              , "offer_skin"         :
                  { "title" : "The Nice merchant"
                  , "image" : "https:static.example.com/merchant-logo"
                  , "description": "¥‎435.22 redemption from your account"
                  }
              , "billing_details"    :
                  { "payer_email"            : "mrpayer.payerson@email.com"
                  , "payer_first_name"       : "MrPayer"
                  , "payer_last_name"        : "Payerson"
                  , "payer_phone"            : "0034666444446"
                  , "birth_date"             : "24:11:1980"
                  , "street"                 : "Main Street"
                  , "unit"                   : "Floor 7 12B"
                  , "postal_code"            : "0000001"
                  , "city"                   : "Big Town"
                  , "county"                 : "Big Town county"
                  , "state"                  : "CA"
                  , "prefecture"             : "Prefecture-ku"
                  , "country"                : "GBR"
                  , "kyc_verified"           : "1999-11-24 09:14:49.087362+00"
                  , "kyc_document"           : "Passport"
                  , "kyc_reference"          : "25177aa2-d848-846d-226c-97ec3096f5fe"
                  , "address_verified"       : "1999-11-24 09:14:49.087362+00"
                  , "address_doc_reference"  : "3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"
                  , "player_level"           : "New"
                  , "member_since"           : "14:07:2019"
                  , "merchant_customer_id"   : "u2340112"
                  }
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"fiat_amount"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"fiat_currency"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"payment_ack_url"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"wwww.example.com"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_redirect_url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com?user_redirected"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"timeout_in_sec"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"offer_skin"</span><span class="w">         </span><span class="p">:</span><span class="w">     
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"title"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Nice merchant"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"image"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:static.example.com/merchant-logo"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"¥‎435.22 redemption from your account"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"billing_details"</span><span class="w">    </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"payer_email"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"mrpayer.payerson@email.com"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_first_name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"MrPayer"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_last_name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payerson"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_phone"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0034666444446"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"birth_date"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"24:11:1980"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"street"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Street"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Floor 7 12B"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"postal_code"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0000001"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"city"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"county"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town county"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"prefecture"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"Prefecture-ku"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_verified"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-11-24 09:14:49.087362+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_document"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Passport"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_reference"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"25177aa2-d848-846d-226c-97ec3096f5fe"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_verified"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-11-24 09:14:49.087362+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_doc_reference"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"player_level"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"member_since"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"14:07:2019"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"merchant_customer_id"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"u2340112"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"invoice_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"invoice_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://wallet.onramp.ltd/egressing?reference=cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/create_egress_invoice </code></b></aside>
<h3 id='request-json-fields'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>fiat_amount</td>
<td>Integer</td>
<td>Eur amount to be paid denominated in cents.</td>
</tr>
<tr>
<td>fiat_currency</td>
<td>String</td>
<td>The constant <code>&quot;EUR&quot;</code>.</td>
</tr>
<tr>
<td>payment_ack_url</td>
<td>String</td>
<td>Merchant callback endpoint to confirm egress transaction. It should be a complete, well formed, url.</td>
</tr>
<tr>
<td>user_redirect_url</td>
<td>String</td>
<td>Where to redirect the user after the egress has been confirmed. It should be a complete, well formed, url.</td>
</tr>
<tr>
<td>timeout_in_sec</td>
<td>Integer</td>
<td>When to expire the link if unused.</td>
</tr>
<tr>
<td>offer_skin</td>
<td>Egress Skin</td>
<td>Specify how the offer should be displayed to the user.</td>
</tr>
<tr>
<td>billing_details</td>
<td>Billing Details</td>
<td>User billing details. (Optional)</td>
</tr>
</tbody></table>
<h3 id='egress-skin'>Egress Skin</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Short string containing merchant&#39;s or redemption&#39;s name.</td>
</tr>
<tr>
<td>image</td>
<td>url</td>
<td>image to stylized the offer.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>A text explaining what the user is redeeming.</td>
</tr>
</tbody></table>
<h3 id='billing-details'>Billing Details</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>payer_email</td>
<td>Email</td>
<td>Email of the user making the payment.</td>
</tr>
<tr>
<td>payer_first_name</td>
<td>String</td>
<td>First name of the user making the payment.</td>
</tr>
<tr>
<td>payer_last_name</td>
<td>String</td>
<td>Last name of the user making the payment.</td>
</tr>
<tr>
<td>payer_phone</td>
<td>String</td>
<td>Including country code, without spaces or separators.</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date</td>
<td>Date of birth of the user making the payment.</td>
</tr>
<tr>
<td>street</td>
<td>String</td>
<td>Street from the billing address.</td>
</tr>
<tr>
<td>unit</td>
<td>String</td>
<td>Unit from the billing address.</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>Postal code from the billing address.</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>City from the billing address.</td>
</tr>
<tr>
<td>county</td>
<td>String</td>
<td>County from the billing address.</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>State from the billing address.</td>
</tr>
<tr>
<td>prefecture</td>
<td>String</td>
<td>Prefecture from the billing address.</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>Country from the billing address. Should be a 3 letter ISO Code.</td>
</tr>
<tr>
<td>kyc_verified</td>
<td>Date</td>
<td>Date when the user was KYC verified.</td>
</tr>
<tr>
<td>kyc_document</td>
<td>String</td>
<td>Type of the document. Some examples would be Passport or National_ID.</td>
</tr>
<tr>
<td>kyc_reference</td>
<td>String</td>
<td>A unique id of the KYC verification. Something like a UUID.</td>
</tr>
<tr>
<td>address_verified</td>
<td>Date</td>
<td>Date when the address was verified.</td>
</tr>
<tr>
<td>address_doc_reference</td>
<td>String</td>
<td>A unique id of the address document reference.</td>
</tr>
<tr>
<td>player_level</td>
<td>String</td>
<td>Your internal player level. Something like New, Normal or VIP would be examples of it.</td>
</tr>
<tr>
<td>member_since</td>
<td>Date</td>
<td>The date since that user is a member of yours.</td>
</tr>
<tr>
<td>merchant_customer_id</td>
<td>String</td>
<td>The merchant customer id.</td>
</tr>
</tbody></table>
<h3 id='callback-egress-invoice'>Callback Egress Invoice</h3>
<p>Once <strong>ON/RAMP</strong> is ready to commit the payment, it will call back merchant to confirm. <strong>It is only at this point
when the user transaction should be consider done and be debited at merchant&#39;s side</strong>. If the merchant was able to
debit the user, then it should answer the callback with an http 200 status code; if the merchant was unable to
debit the user, it should answer with an http 204 status code (this will cancel the user payment, expiring his
invoice link). <strong>Any other status code</strong> but 200 or 204 <strong>will be treated as an internal error from the merchant side</strong>,
pausing the user payment and prompting manual intervention, potentially delaying the process several hours.</p>
<h3 id='response-json-fields'>Response JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoice_id</td>
<td>String</td>
<td>Internal <strong>ON/RAMP</strong>&#39;s Invoice Identifier.</td>
</tr>
<tr>
<td>invoice_url</td>
<td>String</td>
<td>Url where to redirect user.</td>
</tr>
</tbody></table>
<h2 id='create-egress-invoice-user-email-flow'>Create Egress Invoice (User email flow)</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/send_funds_to_email                           <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>       <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                         <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 3000
              , "fiat_currency"      : "EUR"
              , "user_redirect_url"  : "www.example.com?user_redirected"
              , "offer_skin"         :
                  { "title" : "The Nice merchant"
                  , "image" : "https:static.example.com/merchant-logo"
                  , "description": "¥435.22 redemption from your account"
                  }
              , "onramp_user_email"  : "user@example.com"
              , "billing_details"    :
                  { "payer_email"            : "mrpayer.payerson@email.com"
                  , "payer_first_name"       : "MrPayer"
                  , "payer_last_name"        : "Payerson"
                  , "payer_phone"            : "0034666444446"
                  , "birth_date"             : "24:11:1980"
                  , "street"                 : "Main Street"
                  , "unit"                   : "Floor 7 12B"
                  , "postal_code"            : "0000001"
                  , "city"                   : "Big Town"
                  , "county"                 : "Big Town county"
                  , "state"                  : "CA"
                  , "prefecture"             : "Prefecture-ku"
                  , "country"                : "GBR"
                  , "kyc_verified"           : "1999-11-24 09:14:49.087362+00"
                  , "kyc_document"           : "Passport"
                  , "kyc_reference"          : "25177aa2-d848-846d-226c-97ec3096f5fe"
                  , "address_verified"       : "1999-11-24 09:14:49.087362+00"
                  , "address_doc_reference"  : "3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"
                  , "player_level"           : "New"
                  , "member_since"           : "14:07:2019"
                  , "merchant_customer_id"   : "u2340112"
                  }
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"fiat_amount"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"fiat_currency"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_redirect_url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com?user_redirected"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"offer_skin"</span><span class="w">         </span><span class="p">:</span><span class="w">     
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"title"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Nice merchant"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"image"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"https:static.example.com/merchant-logo"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"¥‎435.22 redemption from your account"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"onramp_user_email"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"billing_details"</span><span class="w">    </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"payer_email"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"mrpayer.payerson@email.com"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_first_name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"MrPayer"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_last_name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payerson"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_phone"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0034666444446"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"birth_date"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"24:11:1980"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"street"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Street"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Floor 7 12B"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"postal_code"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0000001"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"city"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"county"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town county"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"prefecture"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"Prefecture-ku"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_verified"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-11-24 09:14:49.087362+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_document"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Passport"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_reference"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"25177aa2-d848-846d-226c-97ec3096f5fe"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_verified"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"1999-11-24 09:14:49.087362+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_doc_reference"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"player_level"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"member_since"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"14:07:2019"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"merchant_customer_id"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"u2340112"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"invoice_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-2'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/send_funds_to_email </code></b></aside>
<h3 id='request-json-fields-2'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>fiat_amount</td>
<td>Integer</td>
<td>Eur amount to be paid denominated in cents.</td>
</tr>
<tr>
<td>fiat_currency</td>
<td>String</td>
<td>The constant <code>&quot;EUR&quot;</code>.</td>
</tr>
<tr>
<td>user_redirect_url</td>
<td>String</td>
<td>Where to redirect the user after the egress has been confirmed. It should be a complete, well formed, url.</td>
</tr>
<tr>
<td>offer_skin</td>
<td>Egress Skin</td>
<td>Specify how the offer should be displayed to the user (It might not be shown in this flow).</td>
</tr>
<tr>
<td>onramp_user_email</td>
<td>String</td>
<td>The email the user has registered with ON/RAMP.</td>
</tr>
</tbody></table>
<h3 id='egress-skin-2'>Egress Skin</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>string</td>
<td>Short string containing merchant&#39;s or redemption&#39;s name.</td>
</tr>
<tr>
<td>image</td>
<td>url</td>
<td>image to stylized the offer.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>A text explaining what the user is redeeming.</td>
</tr>
<tr>
<td>billing_details</td>
<td>Billing Details</td>
<td>User billing details. (Optional)</td>
</tr>
</tbody></table>
<h3 id='billing-details-2'>Billing Details</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>payer_email</td>
<td>Email</td>
<td>Email of the user making the payment.</td>
</tr>
<tr>
<td>payer_first_name</td>
<td>String</td>
<td>First name of the user making the payment.</td>
</tr>
<tr>
<td>payer_last_name</td>
<td>String</td>
<td>Last name of the user making the payment.</td>
</tr>
<tr>
<td>payer_phone</td>
<td>String</td>
<td>Including country code, without spaces or separators.</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date</td>
<td>Date of birth of the user making the payment.</td>
</tr>
<tr>
<td>street</td>
<td>String</td>
<td>Street from the billing address.</td>
</tr>
<tr>
<td>unit</td>
<td>String</td>
<td>Unit from the billing address.</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>Postal code from the billing address.</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>City from the billing address.</td>
</tr>
<tr>
<td>county</td>
<td>String</td>
<td>County from the billing address.</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>State from the billing address.</td>
</tr>
<tr>
<td>prefecture</td>
<td>String</td>
<td>Prefecture from the billing address.</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>Country from the billing address. Should be a 3 letter ISO Code.</td>
</tr>
<tr>
<td>kyc_verified</td>
<td>Date</td>
<td>Date when the user was KYC verified.</td>
</tr>
<tr>
<td>kyc_document</td>
<td>String</td>
<td>Type of the document. Some examples would be Passport or National_ID.</td>
</tr>
<tr>
<td>kyc_reference</td>
<td>String</td>
<td>A unique id of the KYC verification. Something like a UUID.</td>
</tr>
<tr>
<td>address_verified</td>
<td>Date</td>
<td>Date when the address was verified.</td>
</tr>
<tr>
<td>address_doc_reference</td>
<td>String</td>
<td>A unique id of the address document reference.</td>
</tr>
<tr>
<td>player_level</td>
<td>String</td>
<td>Your internal player level. Something like New, Normal or VIP would be examples of it.</td>
</tr>
<tr>
<td>member_since</td>
<td>Date</td>
<td>The date since that user is a member of yours.</td>
</tr>
<tr>
<td>merchant_customer_id</td>
<td>String</td>
<td>The merchant customer id.</td>
</tr>
</tbody></table>
<h2 id='approve-or-reject-user-email-egress-invoice-user-email-flow'>Approve or Reject User Email Egress Invoice (User email flow)</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/mark_operation                           <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>  <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                    <span class="se">\</span>
  -X POST -d <span class="s1">'{ "op_id"  : "cde6f458-8754-4ffe-81a9-77c6d05a5540"
              , "accept" : true
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op_id"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"accept"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">""</span><span class="w">
</span></code></pre><h3 id='http-request-3'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/mark_operation </code></b></aside>
<h3 id='request-json-fields-3'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>op_id</td>
<td>String</td>
<td>UUID reference that was returned from the <code>send_funds_to_email</code> endpoint.</td>
</tr>
<tr>
<td>accept</td>
<td>Boolean</td>
<td>Either if the merchant wants to approve (true) or reject (false) the process.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
