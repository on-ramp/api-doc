
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ON/RAMP payment API v1.0</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-052ba3a1.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-86952380.png" class="logo" alt="Logo" />
        <span class="toc-link">API v1.0</span>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#on-ramp-merchant-integration" class="toc-h1 toc-link" data-title="ON/RAMP merchant integration.">ON/RAMP merchant integration.</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#terminology-and-acronyms" class="toc-h2 toc-link" data-title="Terminology and Acronyms">Terminology and Acronyms</a>
                  </li>
                  <li>
                    <a href="#base-url" class="toc-h2 toc-link" data-title="Base URL">Base URL</a>
                  </li>
                  <li>
                    <a href="#api-flow" class="toc-h2 toc-link" data-title="API flow">API flow</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#calling-on-ramp-api-endpoints" class="toc-h1 toc-link" data-title="Calling ON/RAMP API endpoints.">Calling <strong>ON/RAMP</strong> API endpoints.</a>
          </li>
          <li>
            <a href="#invoice-expiration" class="toc-h1 toc-link" data-title="Invoice expiration">Invoice expiration</a>
          </li>
          <li>
            <a href="#ingress-api" class="toc-h1 toc-link" data-title="Ingress API">Ingress API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-ingress-invoice" class="toc-h2 toc-link" data-title="Create Ingress Invoice">Create Ingress Invoice</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#egress-api" class="toc-h1 toc-link" data-title="Egress API">Egress API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-egress-invoice-app-redirection-flow" class="toc-h2 toc-link" data-title="Create Egress Invoice (App redirection flow)">Create Egress Invoice (App redirection flow)</a>
                  </li>
                  <li>
                    <a href="#create-egress-invoice-user-email-flow" class="toc-h2 toc-link" data-title="Create Egress Invoice (User email flow)">Create Egress Invoice (User email flow)</a>
                  </li>
                  <li>
                    <a href="#approve-or-reject-user-email-egress-invoice-user-email-flow" class="toc-h2 toc-link" data-title="Approve or Reject User Email Egress Invoice (User email flow)">Approve or Reject User Email Egress Invoice (User email flow)</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='on-ramp-merchant-integration'>ON/RAMP merchant integration.</h1><h2 id='terminology-and-acronyms'>Terminology and Acronyms</h2>
<ul>
<li>Merchant: The service using <strong>ON/RAMP</strong> as payment processor.</li>
<li>User: The physical person who sends or receives funds to/from the merchant through <strong>ON/RAMP</strong>.</li>
</ul>
<h2 id='base-url'>Base URL</h2>
<p>Production:
<strong><a href="https://api.onramp.ltd">https://api.onramp.ltd</a></strong></p>

<p>Test:
<strong><a href="https://stage-api.onramp.ltd">https://stage-api.onramp.ltd</a></strong></p>
<h2 id='api-flow'>API flow</h2><h3 id='ingress-flow'>Ingress flow</h3>
<ol>
<li>Merchant <a href="#create-ingress-invoice">creates an ingress invoice url</a>.</li>
<li>Merchant redirects user to the ingress invoice url.</li>
<li><strong>ON/RAMP</strong> handles the payment.</li>
<li>If the payment succeed, <strong>ON/RAMP</strong> will <a href="#callback-ingress-invoice">call back the merchant</a> to either confirm the ingress transaction or to abort it. If merchant confirms, the ingress payment will be considered fulfilled, otherwise, it will be considered as failed.</li>
<li><strong>ON/RAMP</strong> redirects the user back to merchant.</li>
</ol>
<h3 id='egress-flow'>Egress flow</h3>
<p>There are currently two different supported flows for egress:</p>
<h4 id='app-redirection-flow'>App redirection flow</h4>
<ol>
<li><p>Merchant <a href="#create-egress-invoice-app-redirection-flow">creates an egress invoice url</a>.</p></li>
<li><p>Merchant redirects user to the egress invoice url.</p></li>
<li><p><strong>ON/RAMP</strong> gathers required user&#39;s data and consent. If the payment is not feasible or was rejected
by the user, it will fail at this point.</p></li>
<li><p><strong>ON/RAMP</strong> <a href="#callback-egress-invoice">calls back the merchant</a> returning a reference for execution.</p></li>
<li><p>Merchants accepts, rejects or postpones the egress payment.</p></li>
<li><p>If postponed, merchant will have up to 3 days to <a href="#mark_operation">accept or reject it</a>.</p></li>
<li><p>If after 3 days merchant neither accepts nor reject the egress payment it will automatically get rejected.</p></li>
</ol>
<h4 id='user-email-flow'>User email flow</h4>
<ol>
<li><p>Merchant <a href="#create-egress-invoice-user-email-flow">creates a user email egress invoice</a>.</p></li>
<li><p><strong>ON/RAMP</strong> prepares the payment and returns a reference for the merchant to later accept it or reject it.
Merchants can decide whether accept any user or only users previously registered on <strong>ON/RAMP</strong>. If only
previously registered users was requested but the user hast not already registered, or the payment is not feasible, it will fail at this point, otherwise it will return a reference to the Merchant to accept or reject the payment.</p></li>
<li><p>Merchants will have up to 3 days to accept or reject the payment, unless the option <code>required_merchant_confirmation</code>
is set to <code>false</code>, in which case it will be always considered accepted by the merchant.</p></li>
<li><p>If the user is not already registered, <strong>ON/RAMP</strong> will send emails to the user requesting his/her registration.
Users will have up to 3 days to register, otherwise the egress payment will get cancel <strong>even if it was previously
accepted by the merchant</strong>.</p></li>
</ol>
<h1 id='calling-on-ramp-api-endpoints'>Calling <strong>ON/RAMP</strong> API endpoints.</h1>
<p><strong>ON/RAMP</strong> offers a simple REST API taking JSON values as request payload, and returning JSON values as response.
Each call shall include the headers:</p>

<ul>
<li><p><code>Content-Type: application/json</code></p></li>
<li><p><code>x-xco-authorization: Bearer AUTH_TOKEN</code></p></li>
</ul>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/create_ingress_invoice <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer </span><span class="nv">$AUTH_TOKEN</span><span class="s2">"</span>         <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                  <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 1234                                     
              , "fiat_currency"      : "EUR"                                    
              , "payment_ack_url"    : "wwww.example.com"                       
              , "user_redirect_url"  : "www.example.com?user_redirected"        
              , "timeout_in_sec"     : 3600                                     
              , "offer_skin"         : {}                                       
              }'</span>
</code></pre>
<p>Where <code>AUTH_TOKEN</code> is replaced with merchant&#39;s API key.</p>
<h1 id='invoice-expiration'>Invoice expiration</h1>
<p>Each invoice expires after the given timeout or after it has been paid once. This means the user can not accidentally paid
twice for the same ingress invoice, nor get paid twice from the same egress invoice; but it also means the merchant should
create a new invoice to the user every time the user request a new payment. If an user clicks on an expired invoice, it will
get redirected back to the merchant.</p>
<h1 id='ingress-api'>Ingress API</h1>
<p>Any of the endpoints below will return:</p>

<ul>
<li><strong>200</strong> http status if everything was ok.</li>
<li><strong>400</strong> http status if some parameters were invalid (It may specify exactly which ones).</li>
<li><strong>500</strong> http status if something unexpected happened on ON/RAMP&#39;s server.</li>
</ul>
<h2 id='create-ingress-invoice'>Create Ingress Invoice</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/create_ingress_invoice                                    <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>                   <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                                     <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 3000
              , "fiat_currency"      : "EUR"
              , "payment_ack_url"    : "wwww.example.com"
              , "user_redirect_url"  : "www.example.com?user_redirected"
              , "timeout_in_sec"     : 3600
              , "offer_skin"         :
                  { "title" : "The Nice merchant"
                  , "image" : "https://static.example.com/merchant-logo"
                  , "description": "Awesome green Pluff with handler"
                  }
              , "billing_details"    :
                  { "payer_email"            : "mrpayer.payerson@email.com"
                  , "payer_first_name"       : "MrPayer"
                  , "payer_last_name"        : "Payerson"
                  , "payer_phone"            : "0034666444446"
                  , "birth_date"             : "1980-11-24 00:00:00.000000+00"
                  , "street"                 : "Main Street"
                  , "unit"                   : "Floor 7 12B"
                  , "postal_code"            : "0000001"
                  , "city"                   : "Big Town"
                  , "county"                 : "Big Town county"
                  , "state"                  : "CA"
                  , "prefecture"             : "Prefecture-ku"
                  , "country"                : "GBR"
                  , "kyc_verified"           : "2020-01-01 12:45:00.000000+00"
                  , "kyc_document"           : "Passport"
                  , "kyc_reference"          : "25177aa2-d848-846d-226c-97ec3096f5fe"
                  , "address_verified"       : "2020-01-01 12:55:00.000000+00"
                  , "address_doc_reference"  : "3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"
                  , "player_level"           : "New"
                  , "member_since"           : "2020-01-01 12:35:00.000000+00"
                  , "merchant_customer_id"   : "u2340112"
                  }
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"fiat_amount"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"fiat_currency"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"payment_ack_url"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"wwww.example.com"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_redirect_url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com?user_redirected"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"timeout_in_sec"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"offer_skin"</span><span class="w">         </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"title"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Nice merchant"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"image"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.example.com/merchant-logo"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Awesome green Pluff with handler"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"billing_details"</span><span class="w">    </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"payer_email"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"mrpayer.payerson@email.com"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_first_name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"MrPayer"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_last_name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payerson"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_phone"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0034666444446"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"birth_date"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-11-24 00:00:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"street"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Street"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Floor 7 12B"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"postal_code"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0000001"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"city"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"county"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town county"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"prefecture"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"Prefecture-ku"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_verified"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:45:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_document"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Passport"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_reference"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"25177aa2-d848-846d-226c-97ec3096f5fe"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_verified"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:55:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_doc_reference"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"player_level"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"member_since"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:35:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"merchant_customer_id"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"u2340112"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"invoice_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"62b570e8-9723-4287-a5a8-e825c2ffced2"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"invoice_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://wallet.onramp.ltd/ingressing?reference=a3076265-138d-4be6-89fb-d50427adaf4e"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/create_ingress_invoice </code></b></aside>
<h3 id='request-json-fields'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>fiat_amount</td>
<td>Integer</td>
<td>Amount to be paid denominated in cents .</td>
<td>Yes</td>
</tr>
<tr>
<td>fiat_currency</td>
<td>String</td>
<td>Currency identifier following the <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217 standard</a>. Valid values are <code>&quot;EUR&quot;</code> or <code>&quot;USD&quot;</code>.</td>
<td>Yes</td>
</tr>
<tr>
<td>payment_ack_url</td>
<td>Url</td>
<td>Merchant callback endpoint to confirm ingress transaction. It should be a complete, well formed, url.</td>
<td>Yes</td>
</tr>
<tr>
<td>user_redirect_url</td>
<td>Url</td>
<td>Where to redirect the user after a successful payment. It should be a complete, well formed, url.</td>
<td>Yes</td>
</tr>
<tr>
<td>timeout_in_sec</td>
<td>Integer</td>
<td>When to expire the link if unused.</td>
<td>Yes</td>
</tr>
<tr>
<td>offer_skin</td>
<td>Ingress Skin</td>
<td>Specify how the offer should be displayed to the user.</td>
<td>Yes</td>
</tr>
<tr>
<td>billing_details</td>
<td>Billing Details</td>
<td>User billing details. Please, notice how <strong>not</strong> all parameters inside this json object are required except <code>merchant_customer_id</code>.</td>
<td>Yes</td>
</tr>
<tr>
<td>cancel_callback</td>
<td>Url</td>
<td>Merchant callback endpoint to be called when an ingress payment couldn&#39;t be completed</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='ingress-skin'>Ingress Skin</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>String</td>
<td>Short string containing merchant&#39;s or product&#39;s name.</td>
<td>Yes</td>
</tr>
<tr>
<td>image</td>
<td>Url</td>
<td>image to stylize the offer.</td>
<td>Yes</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>A text explaining what the user is purchasing.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='billing-details'>Billing Details</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>payer_email</td>
<td>Email</td>
<td>Email of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_first_name</td>
<td>String</td>
<td>First name of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_last_name</td>
<td>String</td>
<td>Last name of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_phone</td>
<td>String</td>
<td>Including country code, without spaces or separators.</td>
<td>No</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date</td>
<td>Date of birth of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>street</td>
<td>String</td>
<td>Street from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>unit</td>
<td>String</td>
<td>Unit from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>Postal code from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>City from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>county</td>
<td>String</td>
<td>County from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>State from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>prefecture</td>
<td>String</td>
<td>Prefecture from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>Country from the billing address. Should be a 3 letter ISO Code.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_verified</td>
<td>Date</td>
<td>Date when the user was KYC verified.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_document</td>
<td>String</td>
<td>Type of the document. Some examples would be Passport or National_ID.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_reference</td>
<td>String</td>
<td>A unique id of the KYC verification. Something like a UUID.</td>
<td>No</td>
</tr>
<tr>
<td>address_verified</td>
<td>Date</td>
<td>Date when the address was verified.</td>
<td>No</td>
</tr>
<tr>
<td>address_doc_reference</td>
<td>String</td>
<td>A unique id of the address document reference.</td>
<td>No</td>
</tr>
<tr>
<td>player_level</td>
<td>String</td>
<td>Your internal player level. Something like New, Normal, VIP, ...</td>
<td>No</td>
</tr>
<tr>
<td>member_since</td>
<td>Date</td>
<td>The date since that user is a member of yours.</td>
<td>No</td>
</tr>
<tr>
<td>merchant_customer_id</td>
<td>String</td>
<td>The merchant customer id.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='callback-ingress-invoice'>Callback Ingress Invoice</h3>
<p>Once <strong>ON/RAMP</strong> is ready to commit the payment, it will call back merchant to confirm. <strong>It is only at this point
when the user transaction should be consider done and credited at merchant&#39;s side</strong>. If the merchant was able to
credit the user, then it should answer the callback with an http 200 status code; if the merchant was unable to
credit the user, it should answer with an http 204 status code (this will cancel the user payment, expiring his
invoice link). <strong>Any other status code</strong> but 200 or 204 <strong>will be treated as an internal error from the merchant side</strong>,
pausing the user payment and prompting manual intervention, potentially delaying the process several hours.</p>
<h3 id='response-json-fields'>Response JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoice_id</td>
<td>String</td>
<td>Internal <strong>ON/RAMP</strong>&#39;s Invoice Identifier.</td>
</tr>
<tr>
<td>invoice_url</td>
<td>Url</td>
<td>Url where to redirect user.</td>
</tr>
</tbody></table>
<h1 id='egress-api'>Egress API</h1>
<p>Any of the endpoints below will return:</p>

<ul>
<li><strong>200</strong> http status if everything was ok.</li>
<li><strong>400</strong> http status if some parameters were invalid (It may specify exactly which ones).</li>
<li><strong>500</strong> http status if something unexpected happened on ON/RAMP&#39;s server.</li>
</ul>
<h2 id='create-egress-invoice-app-redirection-flow'>Create Egress Invoice (App redirection flow)</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/create_egress_invoice                     <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>   <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                     <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 3000
              , "fiat_currency"      : "EUR"
              , "payment_ack_url"    : "wwww.example.com"
              , "user_redirect_url"  : "www.example.com?user_redirected"
              , "timeout_in_sec"     : 3600
              , "offer_skin"         :
                  { "title" : "The Nice merchant"
                  , "image" : "https://static.example.com/merchant-logo"
                  , "description": "¥‎435.22 redemption from your account"
                  }
              , "billing_details"    :
                  { "payer_email"            : "mrpayer.payerson@email.com"
                  , "payer_first_name"       : "MrPayer"
                  , "payer_last_name"        : "Payerson"
                  , "payer_phone"            : "0034666444446"
                  , "birth_date"             : "1980-11-24 00:00:00.000000+00"
                  , "street"                 : "Main Street"
                  , "unit"                   : "Floor 7 12B"
                  , "postal_code"            : "0000001"
                  , "city"                   : "Big Town"
                  , "county"                 : "Big Town county"
                  , "state"                  : "CA"
                  , "prefecture"             : "Prefecture-ku"
                  , "country"                : "GBR"
                  , "kyc_verified"           : "2020-01-01 12:45:00.000000+00"
                  , "kyc_document"           : "Passport"
                  , "kyc_reference"          : "25177aa2-d848-846d-226c-97ec3096f5fe"
                  , "address_verified"       : "2020-01-01 12:55:00.000000+00"
                  , "address_doc_reference"  : "3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"
                  , "player_level"           : "New"
                  , "member_since"           : "2020-01-01 12:35:00.000000+00"
                  , "merchant_customer_id"   : "u2340112"
                  }
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"fiat_amount"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"fiat_currency"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"payment_ack_url"</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class="s2">"wwww.example.com"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_redirect_url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com?user_redirected"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"timeout_in_sec"</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"offer_skin"</span><span class="w">         </span><span class="p">:</span><span class="w">     
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"title"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Nice merchant"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"image"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.example.com/merchant-logo"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"¥‎435.22 redemption from your account"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"billing_details"</span><span class="w">    </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"payer_email"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"mrpayer.payerson@email.com"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_first_name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"MrPayer"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_last_name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payerson"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_phone"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0034666444446"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"birth_date"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-11-24 00:00:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"street"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Street"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Floor 7 12B"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"postal_code"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0000001"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"city"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"county"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town county"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"prefecture"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"Prefecture-ku"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_verified"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:45:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_document"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Passport"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_reference"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"25177aa2-d848-846d-226c-97ec3096f5fe"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_verified"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:55:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_doc_reference"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"player_level"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"member_since"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:35:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"merchant_customer_id"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"u2340112"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"invoice_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"invoice_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://wallet.onramp.ltd/egressing?reference=cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/create_egress_invoice </code></b></aside>
<h3 id='request-json-fields'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>fiat_amount</td>
<td>Integer</td>
<td>Amount to be paid denominated in cents.</td>
<td>Yes</td>
</tr>
<tr>
<td>fiat_currency</td>
<td>String</td>
<td>Currency identifier following the <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217 standard</a>. Valid values are <code>&quot;EUR&quot;</code> or <code>&quot;USD&quot;</code>.</td>
<td>Yes</td>
</tr>
<tr>
<td>payment_ack_url</td>
<td>Url</td>
<td>Merchant callback endpoint to confirm egress transaction. It should be a complete, well formed, url.</td>
<td>Yes</td>
</tr>
<tr>
<td>user_redirect_url</td>
<td>Url</td>
<td>Where to redirect the user after the egress has been confirmed. It should be a complete, well formed, url.</td>
<td>Yes</td>
</tr>
<tr>
<td>timeout_in_sec</td>
<td>Integer</td>
<td>When to expire the link if unused.</td>
<td>Yes</td>
</tr>
<tr>
<td>offer_skin</td>
<td>Egress Skin</td>
<td>Specify how the offer should be displayed to the user.</td>
<td>Yes</td>
</tr>
<tr>
<td>billing_details</td>
<td>Billing Details</td>
<td>User billing details. Please, notice how <strong>not</strong> all parameters inside this json object are required except <code>merchant_customer_id</code>.</td>
<td>Yes</td>
</tr>
<tr>
<td>cancel_callback</td>
<td>Url</td>
<td>Merchant callback endpoint to be called when an egress payment couldn&#39;t be completed</td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='egress-skin'>Egress Skin</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>String</td>
<td>Short string containing merchant&#39;s or redemption&#39;s name.</td>
<td>Yes</td>
</tr>
<tr>
<td>image</td>
<td>Url</td>
<td>Image to stylize the offer.</td>
<td>Yes</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>A text explaining what the user is redeeming.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='billing-details'>Billing Details</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>payer_email</td>
<td>Email</td>
<td>Email of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_first_name</td>
<td>String</td>
<td>First name of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_last_name</td>
<td>String</td>
<td>Last name of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_phone</td>
<td>String</td>
<td>Including country code, without spaces or separators.</td>
<td>No</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date</td>
<td>Date of birth of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>street</td>
<td>String</td>
<td>Street from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>unit</td>
<td>String</td>
<td>Unit from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>Postal code from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>City from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>county</td>
<td>String</td>
<td>County from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>State from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>prefecture</td>
<td>String</td>
<td>Prefecture from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>Country from the billing address. Should be a 3 letter ISO Code.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_verified</td>
<td>Date</td>
<td>Date when the user was KYC verified.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_document</td>
<td>String</td>
<td>Type of the document. Some examples would be Passport or National_ID.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_reference</td>
<td>String</td>
<td>A unique id of the KYC verification. Something like a UUID.</td>
<td>No</td>
</tr>
<tr>
<td>address_verified</td>
<td>Date</td>
<td>Date when the address was verified.</td>
<td>No</td>
</tr>
<tr>
<td>address_doc_reference</td>
<td>String</td>
<td>A unique id of the address document reference.</td>
<td>No</td>
</tr>
<tr>
<td>player_level</td>
<td>String</td>
<td>Your internal player level. Something like New, Normal, VIP, ...</td>
<td>No</td>
</tr>
<tr>
<td>member_since</td>
<td>Date</td>
<td>The date since that user is a member of yours.</td>
<td>No</td>
</tr>
<tr>
<td>merchant_customer_id</td>
<td>String</td>
<td>The merchant customer id.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='callback-egress-invoice'>Callback Egress Invoice</h3>
<p>Once <strong>ON/RAMP</strong> is ready to commit the payment, it will call back merchant to confirm. <strong>It is only at this point
when the user transaction should be consider done and be debited at merchant&#39;s side</strong>. If the merchant was able to
debit the user, then it should answer the callback with an http 200 status code; if the merchant was unable to
debit the user, it should answer with an http 204 status code (this will cancel the user payment, expiring his
invoice link). <strong>Any other status code</strong> but 200 or 204 <strong>will be treated as an internal error from the merchant side</strong>,
pausing the user payment and prompting manual intervention, potentially delaying the process several hours.</p>
<h3 id='response-json-fields'>Response JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoice_id</td>
<td>String</td>
<td>Internal <strong>ON/RAMP</strong>&#39;s Invoice Identifier.</td>
</tr>
<tr>
<td>invoice_url</td>
<td>Url</td>
<td>Url where to redirect user.</td>
</tr>
</tbody></table>
<h2 id='create-egress-invoice-user-email-flow'>Create Egress Invoice (User email flow)</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/send_funds_to_email                           <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>       <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                         <span class="se">\</span>
  -X POST -d <span class="s1">'{ "fiat_amount"        : 3000
              , "fiat_currency"      : "EUR"
              , "user_redirect_url"  : "www.example.com?user_redirected"
              , "offer_skin"         :
                  { "title" : "The Nice merchant"
                  , "image" : "https://static.example.com/merchant-logo"
                  , "description": "¥435.22 redemption from your account"
                  }
              , "onramp_user_email"  : "user@example.com"
              , "billing_details"    :
                  { "payer_email"            : "mrpayer.payerson@email.com"
                  , "payer_first_name"       : "MrPayer"
                  , "payer_last_name"        : "Payerson"
                  , "payer_phone"            : "0034666444446"
                  , "birth_date"             : "1980-11-24 00:00:00.000000+00"
                  , "street"                 : "Main Street"
                  , "unit"                   : "Floor 7 12B"
                  , "postal_code"            : "0000001"
                  , "city"                   : "Big Town"
                  , "county"                 : "Big Town county"
                  , "state"                  : "CA"
                  , "prefecture"             : "Prefecture-ku"
                  , "country"                : "GBR"
                  , "kyc_verified"           : "2020-01-01 12:45:00.000000+00"
                  , "kyc_document"           : "Passport"
                  , "kyc_reference"          : "25177aa2-d848-846d-226c-97ec3096f5fe"
                  , "address_verified"       : "2020-01-01 12:55:00.000000+00"
                  , "address_doc_reference"  : "3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"
                  , "player_level"           : "New"
                  , "member_since"           : "2020-01-01 12:35:00.000000+00"
                  , "merchant_customer_id"   : "u2340112"
                  }
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"fiat_amount"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="mi">3000</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"fiat_currency"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"user_redirect_url"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"www.example.com?user_redirected"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"offer_skin"</span><span class="w">         </span><span class="p">:</span><span class="w">     
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"title"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Nice merchant"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"image"</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://static.example.com/merchant-logo"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"¥‎435.22 redemption from your account"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"onramp_user_email"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"billing_details"</span><span class="w">    </span><span class="p">:</span><span class="w">
    </span><span class="p">{</span><span class="w"> </span><span class="s2">"payer_email"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"mrpayer.payerson@email.com"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_first_name"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"MrPayer"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_last_name"</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="s2">"Payerson"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"payer_phone"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0034666444446"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"birth_date"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"1980-11-24 00:00:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"street"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Street"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"unit"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Floor 7 12B"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"postal_code"</span><span class="w">            </span><span class="p">:</span><span class="w"> </span><span class="s2">"0000001"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"city"</span><span class="w">                   </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"county"</span><span class="w">                 </span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Town county"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w">                  </span><span class="p">:</span><span class="w"> </span><span class="s2">"CA"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"prefecture"</span><span class="w">             </span><span class="p">:</span><span class="w"> </span><span class="s2">"Prefecture-ku"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"country"</span><span class="w">                </span><span class="p">:</span><span class="w"> </span><span class="s2">"GBR"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_verified"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:45:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_document"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"Passport"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"kyc_reference"</span><span class="w">          </span><span class="p">:</span><span class="w"> </span><span class="s2">"25177aa2-d848-846d-226c-97ec3096f5fe"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_verified"</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:55:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"address_doc_reference"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"3sdffdss-4mgo-44gfd-34dx-r34rfdfs4gf"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"player_level"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"New"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"member_since"</span><span class="w">           </span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-01 12:35:00.000000+00"</span><span class="w">
    </span><span class="p">,</span><span class="w"> </span><span class="s2">"merchant_customer_id"</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class="s2">"u2340112"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"invoice_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='http-request-2'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/send_funds_to_email </code></b></aside>
<h3 id='request-json-fields-2'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>fiat_amount</td>
<td>Integer</td>
<td>Amount to be paid denominated in cents.</td>
<td>Yes</td>
</tr>
<tr>
<td>fiat_currency</td>
<td>String</td>
<td>Currency identifier following the <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217 standard</a>. Valid values are <code>&quot;EUR&quot;</code> or <code>&quot;USD&quot;</code>.</td>
<td>Yes</td>
</tr>
<tr>
<td>user_redirect_url</td>
<td>Url</td>
<td>Where to redirect the user after the egress has been confirmed. It should be a complete, well formed, url.</td>
<td>Yes</td>
</tr>
<tr>
<td>offer_skin</td>
<td>Egress Skin</td>
<td>Specify how the offer should be displayed to the user (It might not be shown in this flow).</td>
<td>Yes</td>
</tr>
<tr>
<td>billing_details</td>
<td>Billing Details</td>
<td>User billing details. Please, notice how <strong>not</strong> all parameters inside this json object are required except <code>merchant_customer_id</code>.</td>
<td>Yes</td>
</tr>
<tr>
<td>onramp_user_email</td>
<td>String</td>
<td>The email the user has registered with ON/RAMP.</td>
<td>Yes</td>
</tr>
<tr>
<td>cancel_callback</td>
<td>Url</td>
<td>Merchant callback endpoint to be called when an egress payment couldn&#39;t be completed</td>
<td>No</td>
</tr>
<tr>
<td>accept_unregister_user</td>
<td>Bool</td>
<td>If <code>false</code> egress to users without an <strong>ON/RAMP</strong> account at the moment the egress was created will be immediately rejected. Defaults to <code>false</code></td>
<td>No</td>
</tr>
<tr>
<td>required_merchant_confirmation</td>
<td>Bool</td>
<td>If <code>true</code>, <strong>ON/RAMP</strong> will wait for a merchant confirmation before releasing the funds. Defaults to <code>true</code></td>
<td>No</td>
</tr>
</tbody></table>
<h3 id='egress-skin-2'>Egress Skin</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>title</td>
<td>String</td>
<td>Short string containing merchant&#39;s or redemption&#39;s name.</td>
<td>Yes</td>
</tr>
<tr>
<td>image</td>
<td>Url</td>
<td>image to stylize the offer.</td>
<td>Yes</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>A text explaining what the user is redeeming.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='billing-details-2'>Billing Details</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>payer_email</td>
<td>Email</td>
<td>Email of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_first_name</td>
<td>String</td>
<td>First name of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_last_name</td>
<td>String</td>
<td>Last name of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>payer_phone</td>
<td>String</td>
<td>Including country code, without spaces or separators.</td>
<td>No</td>
</tr>
<tr>
<td>birth_date</td>
<td>Date</td>
<td>Date of birth of the user making the payment.</td>
<td>No</td>
</tr>
<tr>
<td>street</td>
<td>String</td>
<td>Street from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>unit</td>
<td>String</td>
<td>Unit from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>postal_code</td>
<td>String</td>
<td>Postal code from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>city</td>
<td>String</td>
<td>City from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>county</td>
<td>String</td>
<td>County from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>State from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>prefecture</td>
<td>String</td>
<td>Prefecture from the billing address.</td>
<td>No</td>
</tr>
<tr>
<td>country</td>
<td>String</td>
<td>Country from the billing address. Should be a 3 letter ISO Code.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_verified</td>
<td>Date</td>
<td>Date when the user was KYC verified.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_document</td>
<td>String</td>
<td>Type of the document. Some examples would be Passport or National_ID.</td>
<td>No</td>
</tr>
<tr>
<td>kyc_reference</td>
<td>String</td>
<td>A unique id of the KYC verification. Something like a UUID.</td>
<td>No</td>
</tr>
<tr>
<td>address_verified</td>
<td>Date</td>
<td>Date when the address was verified.</td>
<td>No</td>
</tr>
<tr>
<td>address_doc_reference</td>
<td>String</td>
<td>A unique id of the address document reference.</td>
<td>No</td>
</tr>
<tr>
<td>player_level</td>
<td>String</td>
<td>Your internal player level. Something like New, Normal, VIP, ...</td>
<td>No</td>
</tr>
<tr>
<td>member_since</td>
<td>Date</td>
<td>The date since that user is a member of yours.</td>
<td>No</td>
</tr>
<tr>
<td>merchant_customer_id</td>
<td>String</td>
<td>The merchant customer id.</td>
<td>Yes</td>
</tr>
</tbody></table>
<h3 id='response-json-fields-2'>Response JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invoice_id</td>
<td>String</td>
<td>Internal <strong>ON/RAMP</strong>&#39;s Invoice Identifier.</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Description about the invoice. Might be empty.</td>
</tr>
<tr>
<td>message</td>
<td>String</td>
<td><strong>MIGHT NOT BE PRESENT</strong>: Additional status if user is not registered.</td>
</tr>
</tbody></table>

<p><strong>Note</strong>: If <code>accept_unregister_user</code> is set to <code>false</code> and user inputs a not registered email, <strong>ON/RAMP</strong> will respond with the attached response.</p>

<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"hint"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"details"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ERR_CODE_UNKNOWN_USER_ACCOUNT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In that case, merchant should inform the user about email account being invalid and show a link to sign up with <strong>ON/RAMP</strong> at <a href="https://onrampwallet.com">https://onrampwallet.com</a>.</p>
<h2 id='approve-or-reject-user-email-egress-invoice-user-email-flow'>Approve or Reject User Email Egress Invoice (User email flow)</h2>
<blockquote>
<p>Example Call</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl https://api.onramp.ltd/rpc/mark_operation                           <span class="se">\</span>
  -H <span class="s2">"x-xco-authorization: Bearer 00000000-0000-0000-0000-000000000000"</span>  <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span>                                    <span class="se">\</span>
  -X POST -d <span class="s1">'{ "op_id"  : "cde6f458-8754-4ffe-81a9-77c6d05a5540"
              , "accept" : true
              }'</span>
</code></pre>
<blockquote>
<p>Request JSON Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="s2">"op_id"</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class="s2">"cde6f458-8754-4ffe-81a9-77c6d05a5540"</span><span class="w">
</span><span class="p">,</span><span class="w"> </span><span class="s2">"accept"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre><h3 id='http-request-3'>HTTP Request</h3>
<aside class="success"><b><code> POST /rpc/mark_operation </code></b></aside>
<h3 id='request-json-fields-3'>Request JSON Fields</h3>
<table><thead>
<tr>
<th>Field</th>
<th>Type</th>
<th> Description</th>
</tr>
</thead><tbody>
<tr>
<td>op_id</td>
<td>String</td>
<td>UUID reference that was returned from the <code>send_funds_to_email</code> endpoint.</td>
</tr>
<tr>
<td>accept</td>
<td>Boolean</td>
<td>Either if the merchant wants to approve (true) or reject (false) the process.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
